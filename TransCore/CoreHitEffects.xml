<?xml version="1.0" encoding="utf-8"?>

<TranscendenceModule>
	
<!-- DEFAULT HIT EFFECTS =======================================================

	These effects are used when a weapon hits a target. The variant value is
	the number of hit points of damage caused to the target (after adjusting for
	shields, armor, etc.)
	
	There is one effect for each damage type. Each of the effects has several 
	variants depending on the amount of damage done. The first variant is the
	effect to display when a weapon does no damage.
	
	A weapon may override these effects by provinding a specific <HitEffect>.
	
-->

	<EffectType unid="&efLaserHitDefault;"
			 sound="&snArmorHit1;"
			>
		<Effect>
			<Orb	style=			"flare"
					animate=		"fade"
					>
				<Events>
					<GetParameters>
						(block (
							(damageHP (@ gData 'damageHP))
							(weaponHP (@ gData 'averageDamageHP))
							(laserColor (coreCalcLaserColor weaponHP))
							)
							
							{
								radius: (if (= damageHP 0) 6 (mathScale damageHP 1 30 20 60 50))
								lifetime: (if (= damageHP 0) 4 (mathScale damageHP 1 30 8 16 50))
								intensity: (if (= damageHP 0) 0 (mathScale damageHP 1 30 25 50 50))
								primaryColor: (@ laserColor 'primaryColor)
								secondaryColor: (@ laserColor 'secondaryColor)
								
								noSound: (= damageHP 0)
								}
							)
					</GetParameters>
				</Events>
			</Orb>
		</Effect>
	</EffectType>

	<EffectType UNID="&efKineticHitDefault;"
			 sound="&snArmorHit1;"
			>
		<Effect>
			<ParticleJet
					emitRate=			"20"
					emitSpeed=			"10-20"
					emitStop=			"5"
					particleLifetime=	"2-4"
					spreadAngle=		"30"
					lifetime=			"15"
					xformRotation=		"180"
					>
				<ParticleEffect>
					<Particle
							style=			"plain"
							minWidth=		"1"
							maxWidth=		"3"
							primaryColor=	"#fff4cc"
							secondaryColor=	"#667b80"
							/>
				</ParticleEffect>
				
				<Events>
					<GetParameters>
						(block (
							(damageHP (@ gData 'damageHP))
							(objHit (@ gData 'objHit))
							(scale (objGetProperty objHit 'scale))
							)
							
							;	No particle jet if there is no damage or if
							;	we've hit a world/star. Also, we don't skip 
							;	abandoned stations, since they create their own
							;	ejacta.
							
							(if (or (= damageHP 0)
									(= scale 'star)
									(= scale 'world)
									(objGetProperty objHit 'abandoned)
									)
								{
									emitRate: 0
									}
									
								{
									emitRate: (mathScale damageHP 1 30 10 60 50)
									}
								)
							)
					</GetParameters>
				</Events>
			</ParticleJet>

			<Orb	style=			"flare"
					animate=		"fade"
					primaryColor=	"#ccf7ff"
					secondaryColor=	"#667b80"
					>
				<Events>
					<GetParameters>
						(block (
							(damageHP (@ gData 'damageHP))
							)
							
							{
								radius: (if (= damageHP 0) 6 (mathScale damageHP 1 30 20 60 50))
								lifetime: (if (= damageHP 0) 4 (mathScale damageHP 1 30 8 16 50))
								intensity: (if (= damageHP 0) 0 (mathScale damageHP 1 30 25 50 50))
								}
							)
					</GetParameters>
				</Events>
			</Orb>
		</Effect>
				
		<Events>
			<GetParameters>
				(block (
					(damageHP (@ gData 'damageHP))
					)
							
					{
						noSound: (= damageHP 0)
						}
					)
			</GetParameters>
		</Events>
	</EffectType>

	<Effect UNID="&efParticleHitDefault;">
		<Variants>
			<Effect maxValue="0">
				<ParticleCloud
						style=				"splash"
						lifetime=			"15"
						emitDuration=		"5"
						emitRate=			"10"
						emitSpeed=			"5-10"
						particleLifetime=	"10"
						>
					<ParticleEffect>
						<Particle
								style=			"plain"
								minWidth=		"1"
								maxWidth=		"3"
								primaryColor=	"0x5f, 0xf1, 0x2a"
								secondaryColor=	"0x5f, 0xf1, 0x2a"
								/>
					</ParticleEffect>
				</ParticleCloud>
			</Effect>
			
			<Effect maxValue="9" 
					sound="&snArmorHit1;">
				<ParticleCloud
						style=			"splash" 
						lifetime=		"20" 
						emitDuration=	"60"
						emitRate=		"20-25"
						emitSpeed=		"1-6"
						particleLifetime="4"
						>
					<ParticleEffect>
						<Particle
								style=			"plain"
								maxWidth=		"1-2"
								primaryColor=	"0x5f, 0xf1, 0x2a"
								secondaryColor=	"0x00, 0xff, 0x00"
								/>
					</ParticleEffect>
				</ParticleCloud>
			</Effect>
			
			<Effect maxValue="13" 
					sound="&snArmorHit1;">
				<ParticleCloud
						style=			"splash" 
						lifetime=		"20" 
						emitDuration=	"60"
						emitRate=		"30-37"
						emitSpeed=		"1-6"
						particleLifetime="5"
						>
					<ParticleEffect>
						<Particle
								style=			"plain"
								maxWidth=		"1-2"
								primaryColor=	"0x5f, 0xf1, 0x2a"
								secondaryColor=	"0x00, 0xff, 0x00"
								/>
					</ParticleEffect>
				</ParticleCloud>
			</Effect>

			<Effect
					sound="&snArmorHit1;">
				<ParticleCloud
						style=			"splash" 
						lifetime=		"20" 
						emitDuration=	"60"
						emitRate=		"40-50"
						emitSpeed=		"1-6"
						particleLifetime="5"
						>
					<ParticleEffect>
						<Particle
								style=			"plain"
								maxWidth=		"1-2"
								primaryColor=	"0x5f, 0xf1, 0x2a"
								secondaryColor=	"0x00, 0xff, 0x00"
								/>
					</ParticleEffect>
				</ParticleCloud>
			</Effect>
		</Variants>
	</Effect>
	
	<Effect UNID="&efBlastHitDefault;">
		<Variants>
			<Effect maxValue="0">
				<ParticleCloud
						style=				"splash"
						lifetime=			"15"
						emitDuration=		"5"
						emitRate=			"10"
						emitSpeed=			"5-10"
						particleLifetime=	"10"
						>
					<ParticleEffect>
						<Particle
								style=			"flame"
								minWidth=		"1"
								maxWidth=		"3"
								/>
					</ParticleEffect>
				</ParticleCloud>
			</Effect>
			
			<Effect maxValue="9" 
					sound="&snArmorHit1;">
				<Image imageID="&rsMediumHit;" 
						imageX="0" 
						imageY="0" 
						imageWidth="32" 
						imageHeight="32"
						imageFrameCount="12"
						imageTicksPerFrame="1"/>
			</Effect>
			
			<Effect maxValue="13" 
					sound="&snArmorHit1;">
				<Image imageID="&rsMediumHit;" 
						imageX="0" 
						imageY="0" 
						imageWidth="32" 
						imageHeight="32"
						imageFrameCount="12"
						imageTicksPerFrame="1"/>
			</Effect>
			
			<Effect maxValue="18" 
					sound="&snArmorHit1;">
				<Image imageID="&rsExplosionsAG48;"
						imageX="0"
						imageY="0"
						imageWidth="48"
						imageHeight="48"
						imageFrameCount="16"
						imageTicksPerFrame="2"/>
			</Effect>
			
			<Effect maxValue="27" 
					sound="&snArmorHit1;">
				<Image imageID="&rsExplosionsAG48;"
						imageX="0"
						imageY="0"
						imageWidth="48"
						imageHeight="48"
						imageFrameCount="16"
						imageTicksPerFrame="2"/>
			</Effect>
			
			<Effect
					sound="&snArmorHit1;">
				<Image imageID="&rsMediumExplosions;" 
						imageX="0" 
						imageY="0" 
						imageWidth="64" 
						imageHeight="64"
						imageFrameCount="16"
						imageTicksPerFrame="2"/>
			</Effect>
		</Variants>
	</Effect>

	<Effect UNID="&efIonHitDefault;">
		<Variants>
			<Effect maxValue="0">
				<ParticleCloud
						style=				"splash"
						lifetime=			"15"
						emitDuration=		"5"
						emitRate=			"10"
						emitSpeed=			"5-10"
						particleLifetime=	"10"
						>
					<ParticleEffect>
						<Particle
								style=			"plain"
								minWidth=		"1"
								maxWidth=		"3"
								primaryColor=	"0xa0, 0xf0, 0xff"
								secondaryColor=	"0x00, 0xa9, 0xff"
								/>
					</ParticleEffect>
				</ParticleCloud>
			</Effect>
			
			<Effect maxValue="21" 
					sound="&snArmorHit1;">
				<ParticleCloud
						style=			"splash" 
						lifetime=		"20" 
						emitDuration=	"60"
						emitRate=		"20-25"
						emitSpeed=		"1-6"
						particleLifetime="4"
						>
					<ParticleEffect>
						<Particle
								style=			"plain"
								maxWidth=		"1-2"
								primaryColor=	"0xa0, 0xf0, 0xff"
								secondaryColor=	"0x00, 0xa9, 0xff"
								/>
					</ParticleEffect>
				</ParticleCloud>
			</Effect>
			
			<Effect maxValue="31" 
					sound="&snArmorHit1;">
				<ParticleCloud
						style=			"splash" 
						lifetime=		"20" 
						emitDuration=	"60"
						emitRate=		"30-37"
						emitSpeed=		"1-6"
						particleLifetime="5"
						>
					<ParticleEffect>
						<Particle
								style=			"plain"
								maxWidth=		"1-2"
								primaryColor=	"0xa0, 0xf0, 0xff"
								secondaryColor=	"0x00, 0xa9, 0xff"
								/>
					</ParticleEffect>
				</ParticleCloud>
			</Effect>

			<Effect
					sound="&snArmorHit1;">
				<ParticleCloud
						style=			"splash" 
						lifetime=		"20" 
						emitDuration=	"60"
						emitRate=		"40-50"
						emitSpeed=		"1-6"
						particleLifetime="5"
						>
					<ParticleEffect>
						<Particle
								style=			"plain"
								maxWidth=		"1-2"
								primaryColor=	"0xa0, 0xf0, 0xff"
								secondaryColor=	"0x00, 0xa9, 0xff"
								/>
					</ParticleEffect>
				</ParticleCloud>
			</Effect>
		</Variants>
	</Effect>
	
	<Effect UNID="&efThermoHitDefault;">
		<Variants>
			<Effect maxValue="0">
				<ParticleCloud
						style=				"splash"
						lifetime=			"15"
						emitDuration=		"5"
						emitRate=			"10"
						emitSpeed=			"5-10"
						particleLifetime=	"10"
						>
					<ParticleEffect>
						<Particle
								style=			"flame"
								minWidth=		"1"
								maxWidth=		"3"
								/>
					</ParticleEffect>
				</ParticleCloud>
			</Effect>
			
			<Effect maxValue="21" 
					sound="&snArmorHit1;">
				<Image imageID="&rsExplosionsAG48;"
						imageX="0"
						imageY="0"
						imageWidth="48"
						imageHeight="48"
						imageFrameCount="16"
						imageTicksPerFrame="2"/>
			</Effect>
			
			<Effect maxValue="31" 
					sound="&snArmorHit1;">
				<Image imageID="&rsMediumExplosions;" 
						imageX="0" 
						imageY="0" 
						imageWidth="64" 
						imageHeight="64"
						imageFrameCount="16"
						imageTicksPerFrame="2"/>
			</Effect>
			
			<Effect maxValue="42"
					sound="&snArmorHit1;">
				<Image imageID="&rsExplosionsAG96;"
						imageX="0"
						imageY="0"
						imageWidth="96"
						imageHeight="96"
						imageFrameCount="16"
						imageTicksPerFrame="2"/>
			</Effect>
			
			<Effect
					sound="&snArmorHit1;">
				<Image imageID="&rsExplosionsAG96;"
						imageX="0"
						imageY="0"
						imageWidth="96"
						imageHeight="96"
						imageFrameCount="16"
						imageTicksPerFrame="2"/>
			</Effect>
		</Variants>
	</Effect>

	<Effect UNID="&efPositronHitDefault;">
		<Variants>
			<Effect maxValue="0">
				<ParticleCloud
						style=				"splash"
						lifetime=			"15"
						emitDuration=		"5"
						emitRate=			"10"
						emitSpeed=			"5-10"
						particleLifetime=	"10"
						>
					<ParticleEffect>
						<Particle
								style=			"plain"
								minWidth=		"1"
								maxWidth=		"3"
								primaryColor=	"0xff, 0xf0, 0xa0"
								secondaryColor=	"0xff, 0xa9, 0x00"
								/>
					</ParticleEffect>
				</ParticleCloud>
			</Effect>
			
			<Effect maxValue="46" 
					sound="&snArmorHit1;">
				<ParticleCloud
						style=			"splash" 
						lifetime=		"20" 
						emitDuration=	"60"
						emitRate=		"20-25"
						emitSpeed=		"1-6"
						particleLifetime="4"
						>
					<ParticleEffect>
						<Particle
								style=			"plain"
								maxWidth=		"1-2"
								primaryColor=	"0xff, 0xf0, 0xa0"
								secondaryColor=	"0xff, 0xa9, 0x00"
								/>
					</ParticleEffect>
				</ParticleCloud>
			</Effect>
			
			<Effect maxValue="69" 
					sound="&snArmorHit1;">
				<ParticleCloud
						style=			"splash" 
						lifetime=		"20" 
						emitDuration=	"60"
						emitRate=		"30-37"
						emitSpeed=		"1-6"
						particleLifetime="5"
						>
					<ParticleEffect>
						<Particle
								style=			"plain"
								maxWidth=		"1-2"
								primaryColor=	"0xff, 0xf0, 0xa0"
								secondaryColor=	"0xff, 0xa9, 0x00"
								/>
					</ParticleEffect>
				</ParticleCloud>
			</Effect>

			<Effect
					sound="&snArmorHit1;">
				<ParticleCloud
						style=			"splash" 
						lifetime=		"20" 
						emitDuration=	"60"
						emitRate=		"40-50"
						emitSpeed=		"1-6"
						particleLifetime="5"
						>
					<ParticleEffect>
						<Particle
								style=			"plain"
								maxWidth=		"1-2"
								primaryColor=	"0xff, 0xf0, 0xa0"
								secondaryColor=	"0xff, 0xa9, 0x00"
								/>
					</ParticleEffect>
				</ParticleCloud>
			</Effect>
		</Variants>
	</Effect>
	
	<Effect UNID="&efPlasmaHitDefault;">
		<Variants>
			<Effect maxValue="0">
				<ParticleCloud
						style=				"splash"
						lifetime=			"15"
						emitDuration=		"5"
						emitRate=			"10"
						emitSpeed=			"5-10"
						particleLifetime=	"10"
						>
					<ParticleEffect>
						<Particle
								style=			"plain"
								minWidth=		"1"
								maxWidth=		"3"
								primaryColor=	"0xff, 0xf0, 0xa0"
								secondaryColor=	"0xff, 0xa9, 0x00"
								/>
					</ParticleEffect>
				</ParticleCloud>
			</Effect>
			
			<Effect maxValue="23"
					sound="&snArmorHit1;">
					
				<ParticleCloud
						style=			"splash" 
						lifetime=		"30"
						emitDuration=	"5"
						emitRate=		"8-10"
						emitSpeed=		"1-6"
						particleLifetime="10-15"
						>
					<ParticleEffect>
						<Shape
								directional=		"true"
								scaleLength=		"12" 
								scaleWidth=			"4"

								scaleLengthInc=		"1" 

								color=				"0xff, 0xfd, 0xad"
								opacity=			"64"
								>
							<Point x="0"	y="0"/>
							<Point x="-5"	y="29"/>
							<Point x="-10"	y="44"/>
							<Point x="-20"	y="50"/>
							<Point x="-30"	y="47"/>
							<Point x="-40"	y="44"/>
							<Point x="-100"	y="0"/>
							<Point x="-40"	y="-44"/>
							<Point x="-30"	y="-47"/>
							<Point x="-20"	y="-50"/>
							<Point x="-10"	y="-44"/>
							<Point x="-5"	y="-29"/>
						</Shape>
					</ParticleEffect>
				</ParticleCloud>
				
				<Flare
						style=			"fadingBlast"
						radius=			"35"
						primaryColor=	"0xff, 0xff, 0xff"
						secondaryColor=	"0xff, 0xfd, 0xad"
						lifetime=		"6"
						/>
			</Effect>
			
			<Effect maxValue="46"
					sound="&snArmorHit1;">
					
				<ParticleCloud
						style=			"splash" 
						lifetime=		"30"
						emitDuration=	"6"
						emitRate=		"10-12"
						emitSpeed=		"1-6"
						particleLifetime="10-15"
						>
					<ParticleEffect>
						<Shape
								directional=		"true"
								scaleLength=		"16" 
								scaleWidth=			"4"

								scaleLengthInc=		"1"

								color=				"0xff, 0xfd, 0xad"
								opacity=			"64"
								>
							<Point x="0"	y="0"/>
							<Point x="-5"	y="29"/>
							<Point x="-10"	y="44"/>
							<Point x="-20"	y="50"/>
							<Point x="-30"	y="47"/>
							<Point x="-40"	y="44"/>
							<Point x="-100"	y="0"/>
							<Point x="-40"	y="-44"/>
							<Point x="-30"	y="-47"/>
							<Point x="-20"	y="-50"/>
							<Point x="-10"	y="-44"/>
							<Point x="-5"	y="-29"/>
						</Shape>
					</ParticleEffect>
				</ParticleCloud>
				
				<Flare
						style=			"fadingBlast"
						radius=			"50"
						primaryColor=	"0xff, 0xff, 0xff"
						secondaryColor=	"0xff, 0xfd, 0xad"
						lifetime=		"10"
						/>
			</Effect>
			
			<Effect
					sound="&snArmorHit1;">
					
				<ParticleCloud
						style=			"splash" 
						lifetime=		"40" 
						emitDuration=	"8"
						emitRate=		"18-20"
						emitSpeed=		"1-6"
						particleLifetime="10-15"
						>
					<ParticleEffect>
						<Shape
								directional=		"true"
								scaleLength=		"16" 
								scaleWidth=			"6"

								scaleLengthInc=		"1" 

								color=				"0xff, 0xfd, 0xad"
								opacity=			"64"
								>
							<Point x="0"	y="0"/>
							<Point x="-5"	y="29"/>
							<Point x="-10"	y="44"/>
							<Point x="-20"	y="50"/>
							<Point x="-30"	y="47"/>
							<Point x="-40"	y="44"/>
							<Point x="-100"	y="0"/>
							<Point x="-40"	y="-44"/>
							<Point x="-30"	y="-47"/>
							<Point x="-20"	y="-50"/>
							<Point x="-10"	y="-44"/>
							<Point x="-5"	y="-29"/>
						</Shape>
					</ParticleEffect>
				</ParticleCloud>
				
				<Flare
						style=			"fadingBlast"
						radius=			"80"
						primaryColor=	"0xff, 0xff, 0xff"
						secondaryColor=	"0xff, 0xfd, 0xad"
						lifetime=		"10"
						/>
			</Effect>
		</Variants>
	</Effect>
	
<!-- GLOBALS -->

	<Globals>
		(block Nil
			(setq coreCalcLaserColor (lambda (damageHP)
				(switch
					(geq damageHP 15)
						{
							primaryColor: "#D500FF"
							secondaryColor: "#6A00FF"
							}
							
					(geq damageHP 7)
						{
							primaryColor: "#55FF00"
							secondaryColor: "#2A8000"
							}

					(geq damageHP 4)
						{
							primaryColor: "#FF5500"
							secondaryColor: "#802A00"
							}

					{
						primaryColor: "#FF0000"
						secondaryColor: "#800000"
						}
					)
				))
			)
	</Globals>
	
</TranscendenceModule>
